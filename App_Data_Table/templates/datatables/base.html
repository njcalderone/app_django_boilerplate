{% load static %}
{% include 'snippet/head.html' %}
<body >
<div class="container">
    <div class="row">
        <p><h3 class="text-primary" id="data_input" style="text-align: center;">Name of my data table</h3></p>
        <hr style="border-top:1px dotted #ccc;"/>
        {% block body %}

        {% endblock %}
    </div>
</div>
</body>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src = "https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script type = "text/javascript">
    $(document).ready(function(){
        $('#table').DataTable();
        $('#submit').on('click', function(){
            $firstname = $('#firstname').val();
            $lastname = $('#lastname').val();
            $address = $('#address').val();
            $phone = $('#phone').val();

            if($firstname == "" || $lastname == "" || $address == "" || $phone == "" ){
                alert("Please complete field");
            }else{
                $.ajax({
                    type: "POST",
                    url: "insert",
                    data:{
                        firstname: $firstname,
                        lastname: $lastname,
                        address: $address,
                        phone: $phone,
                        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                    },
                    success: function(){
                        alert('Save Data');
                        $('#firstname').val('');
                        $('#lastname').val('');
                        $('#address').val('');
                        $('#phone').val('');
                        window.location = "/datatables/index.html";
                    }
                });
            }
        });
    });
</script>